<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com/"></script>

    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

</head>

<body>
    <!-- component -->
    <section class="flex flex-col md:flex-row h-screen items-center">

        <div class="bg-indigo-600 hidden lg:block w-full md:w-1/2 xl:w-2/3 h-screen">
            <img src="/static/assets/sprinkler.jpg" alt="" class="w-full h-full object-cover">
        </div>

        <div class="bg-white w-full md:max-w-md lg:max-w-full md:mx-auto md:mx-0 md:w-1/2 xl:w-1/3 h-screen px-6 lg:px-16 xl:px-12
          flex items-center justify-center">

            <div class="w-full h-100">


                <h1 class="text-xl md:text-2xl font-bold leading-tight mt-12">{% if auth_type !="login" %}Sign up to create new account{% else %}Log in to your account {% endif %}</h1>

                <form class="mt-6" id="form" action="#" method="POST">
                    {% if auth_type !="login" %}
                    <div>
                        <label class="block text-gray-700" for="name">Full Name</label>
                        <input type="text" name="name" id="name" placeholder="Enter Full Name" class="w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none" autofocus autocomplete required>
                    </div>
                    <div class="mt-4">
                        <label class="block text-gray-700">Mobile</label>
                        <input type="tel" name="mobile" id="mobile" placeholder="Enter Mobile Number" minlength="10" class="w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500
                  focus:bg-white focus:outline-none" required>
                    </div>



                    {% endif %}
                    <div class="mt-4">
                        <label class="block text-gray-700">Email Address</label>
                        <input type="email" name="email" id="email" placeholder="Enter Email Address" class="w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500 focus:bg-white focus:outline-none" autofocus autocomplete required>
                    </div>
                    <div class="mt-4">
                        <label class="block text-gray-700">Password</label>
                        <input type="password" name="password" id="password" placeholder="Enter Password" minlength="6" class="w-full px-4 py-3 rounded-lg bg-gray-200 mt-2 border focus:border-blue-500
                  focus:bg-white focus:outline-none" required>
                    </div>



                    <div class="text-right mt-2">
                        <a href="#" class="text-sm font-semibold text-gray-700 hover:text-blue-700 focus:text-blue-700">Forgot Password?</a>
                    </div>

                    <button type="submit" class="w-full block bg-indigo-500 hover:bg-indigo-400 focus:bg-indigo-400 text-white font-semibold rounded-lg
                px-4 py-3 mt-6">{% if auth_type !="login" %}Sign Up{% else %}Log In {% endif %}</button>
                </form>

                <hr class="my-6 border-gray-300 w-full">

                <button type="button" class="w-full block bg-white hover:bg-gray-100 focus:bg-gray-100 text-gray-900 font-semibold rounded-lg px-4 py-3 border border-gray-300">
              <div class="flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-6 h-6" viewBox="0 0 48 48"><defs><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23 7.9 1L48 0v48H0z"/><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/></svg>
              <span class="ml-4">
              Log in
              with
              Google</span>
              </div>
            </button> {% if auth_type !="login" %}
                <p class="mt-8">Already have account? <a href="/login" class="text-blue-500 hover:text-blue-700 font-semibold">Log in</a></p>{% else %}
                <p class="mt-8">Need an account? <a href="/signup" class="text-blue-500 hover:text-blue-700 font-semibold">Create an
                account</a></p>{% endif %}



            </div>
        </div>
        <div class="flex items-end justify-end fixed top-32 right-0 mb-4 mr-4 z-10">

            <div id="msgDisplay" class=" hidden flex items-center p-4 w-full max-w-xs text-gray-500 bg-white rounded-lg shadow dark:text-gray-400 dark:bg-gray-800" role="alert">
                <div class="inline-flex flex-shrink-0 justify-center items-center w-8 h-8 text-blue-500 bg-blue-100 rounded-lg dark:bg-blue-800 dark:text-blue-200">
                    <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z" clipRule="evenodd"></path></svg>
                    <span class="sr-only">Fire icon</span>
                </div>
                <div class="ml-3 text-sm font-normal" id="msgContent"></div>
                <button type="button" class="alert-del ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8 dark:text-gray-500 dark:hover:text-white dark:bg-gray-800 dark:hover:bg-gray-700"
                    data-bs-dismiss="#msgDisplay" data-dismiss-target="#msgDisplay" aria-label="Close">
            <span class="sr-only">Close</span>
            <svg aria-hidden="true" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd"></path></svg>
        </button>
            </div>

        </div>
    </section>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function() {
            var auth_type = "{{auth_type}}";
            if (auth_type == "login") {
                $("#form").submit(function(event) {
                    event.preventDefault();
                    var email = $("input[name='email']").val();
                    var password = $("input[name='password']").val();

                    fetch("/login", {
                            method: "POST",
                            body: JSON.stringify({
                                email: email,
                                password: password
                            }),
                            headers: {
                                "Content-Type": "application/json"
                            }
                        })
                        .then(function(response) {
                            if (response.ok) {
                                return response.json();
                            } else {

                                throw new Error("Error: " + response.status);
                            }
                        })
                        .then(function(data) {
                            console.log(data);
                            document.getElementById("msgDisplay").classList.remove("hidden");
                            document.getElementById("msgContent").innerText = data.message;
                            setTimeout(function() {
                                var redirect_url = "{{ redirect_url }}";
                                location.href = redirect_url;
                            }, 500);
                            // Display the response or perform any other actions
                        })
                        .catch(function(error) {
                            document.getElementById("msgDisplay").classList.remove("hidden");
                            document.getElementById("msgContent").innerText = data.error;
                            console.error(error);
                            // Handle error
                        });
                });

            } else {
                $("#form").submit(function(event) {
                    event.preventDefault();

                    var name = $("input[name='name']").val();
                    var email = $("input[name='email']").val();
                    var password = $("input[name='password']").val();
                    var mobile = $("input[name='mobile']").val();

                    fetch("/signup", {
                            method: "POST",
                            body: JSON.stringify({
                                name: name,
                                email: email,
                                password: password,
                                mobile: mobile
                            }),
                            headers: {
                                "Content-Type": "application/json"
                            }
                        })
                        .then(function(response) {
                            if (response.ok) {
                                return response.json();
                            } else {
                                throw new Error("Error: " + response.status);
                            }
                        })
                        .then(function(data) {
                            $('.msgDisplay').classList.remove("hidden");
                            $("#msgContent").innerText = data.message;
                            console.log(data);
                            // Display the response or perform any other actions
                        })
                        .catch(function(error) {
                            console.error(error);
                            // Handle error
                        });
                });
            }


        });
    </script>









</body>

</html>